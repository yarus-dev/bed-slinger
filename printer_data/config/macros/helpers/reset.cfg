[gcode_macro _RESET_CONTEXT]
gcode:
  M220 S100  ; reset feedrate
  M221 S100  ; reset flowrate

  RESET_FAN ; fan off fan
    G21       ; set units to millimeters
    G90       ; absolute positioning
    M83       ; relative extrusion mode
    G92 E0    ; reset extrusion distance


[gcode_macro _RESET_VELOCITY]
gcode:
  {% set config = printer.configfile.config.printer %}
  SET_VELOCITY_LIMIT VELOCITY={config.max_velocity} ACCEL={config.max_accel} MINIMUM_CRUISE_RATIO={config.minimum_cruise_ratio} SQUARE_CORNER_VELOCITY={config.square_corner_velocity}