[gcode_macro BEEP]
gcode:
    {% set Frequency  = params.FREQUENCY|default(2000)|int %} ; Frequency in Hz. Default 2kHz.
    {% set duration = params.DURATION|default(100)|int %}  ; Duration/wait of each beep in ms. Default 100ms.
    SET_PIN PIN=beeper VALUE=0.8 CYCLE_TIME={ 1.0/Frequency if Frequency > 0 else 1 }
    G4 P{P}
    SET_PIN PIN=beeper VALUE=0
